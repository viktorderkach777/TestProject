
 def buildCauses = currentBuild.rawBuild.getCauses()


pipeline {


agent any 
  parameters {
        string(name: 'TestCategory', defaultValue: 'Login', description: 'Enter the testcategory')
    }

environment {

dotnet = '/usr/share/dotnet/dotnet'

}

stages {  

stage('Checkout') {

steps {

checkout scm

}

}

stage('Restore Packages') {

steps {

dir("awesome-project") {

sh "ls -la"

sh "pwd"

sh 'dotnet --info'

sh 'dotnet restore'

}

}

}

stage('DotNet Test') {

steps {

dir("awesome-project") {

sh "ls -la"

sh "pwd"

sh 'dotnet --info'

  echo "${params.TestCategory}"  
  echo "${currentBuild.getBuildCauses('jenkins.branch.BranchEventCause')}"
  echo "${buildCauses}"
}

}

}


stage('Example Deploy') {
            when {
                triggeredBy 'SCMTrigger'
            }
            steps {
                echo "============SCMTrigger==========================="
            }
        }


}

}

